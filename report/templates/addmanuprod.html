{% extends 'base.html' %}
{% load static %}
{% block title %}New Product{% endblock title %}
{% block body %}

{% if messages %}
    {% for message in messages %}
    <div class="alert {{ message.tags }} alert-dismissible fade show" role="alert">
        <strong>Alert</strong> {{ message }}
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
      </div>
    {% endfor %}
{% endif %}

 <!-- rawmaterial start -->
  <div class="container">
    <div class="row">
      <div class="col-12">
        <h2>Add New Product</h2>
        <form action="/addnewprod" id="addqty" method="POST">
          {% csrf_token %}
          
          <div class="form-floating">
            <input type="text" class="form-control" name="prodname" id="prodname" placeholder="New Product Name" required>
            <label for="prodname">New Product Name (Q-001)</label>
            <div class="text-danger" id="error"></div>
          </div> <br>

          <div class="form-floating">
            <input type="text" class="form-control" name="proddesc" id="proddesc" placeholder="product Description" required>
            <label for="proddesc">product Description(non-warranty LED bulb 12W)</label>
          </div> <br>
          <div class="form-floating">
            <input type="tel" class="form-control" name="mprice" id="mprice" placeholder="Enter the manufacturing cost per item" required>
            <label for="mprice">Enter the manufacturing cost per item</label>
          </div> <br>
          <button type="submit" class="btn btn-primary">Confirm</button>
        </form>
      </div>
    </div>
  </div>
 <script>
    $(document).ready(
      function(){
        $("#prodname").focus(function(){
          $("#error").css('display','none');
        })
        
        $("#prodname").blur(function(e){
          $("#error").css('display','block');

            e.preventDefault();
            $.ajax({
              type:"POST",
              url:"/chkname",
              data:{
                name:$("#prodname").val(),
                csrfmiddlewaretoken:$('input[name=csrfmiddlewaretoken]').val()
              },
              success:function(res){
                $("#error").html(res);
              }
            })

        })
      

        
      }
    )
  </script>
{% endblock body %}